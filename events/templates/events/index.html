{% extends 'events/base.html' %}

{% block content %}
<div class="page-header">
    <h1>–ü—Ä–µ–¥—Å—Ç–æ—è—â–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</h1>
</div>

<form method="get" class="search-form">
    <div class="form-grid">
        <div class="form-group">
            <input type="text" name="search" placeholder="–ü–æ–∏—Å–∫ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π..."
                   value="{{ request.GET.search }}" class="form-control">
        </div>
        <div class="form-group">
            <select name="event_type" class="form-control">
                <option value="">–í—Å–µ —Ç–∏–ø—ã</option>
                <option value="concert" {% if request.GET.event_type == 'concert' %}selected{% endif %}>–ö–æ–Ω—Ü–µ—Ä—Ç</option>
                <option value="exhibition" {% if request.GET.event_type == 'exhibition' %}selected{% endif %}>–í—ã—Å—Ç–∞–≤–∫–∞</option>
                <option value="theater" {% if request.GET.event_type == 'theater' %}selected{% endif %}>–¢–µ–∞—Ç—Ä</option>
                <option value="festival" {% if request.GET.event_type == 'festival' %}selected{% endif %}>–§–µ—Å—Ç–∏–≤–∞–ª—å</option>
                <option value="sport" {% if request.GET.event_type == 'sport' %}selected{% endif %}>–°–ø–æ—Ä—Ç</option>
                <option value="conference" {% if request.GET.event_type == 'conference' %}selected{% endif %}>–ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è</option>
                <option value="other" {% if request.GET.event_type == 'other' %}selected{% endif %}>–î—Ä—É–≥–æ–µ</option>
            </select>
        </div>
        <button type="submit" class="btn">–ù–∞–π—Ç–∏</button>
    </div>
</form>

{% if events %}
<div class="events-grid">
    {% for event in events %}
    <div class="event-card">
        {% if event.image %}
        <img src="{{ event.image.url }}" alt="{{ event.title }}" class="event-image">
        {% endif %}
        <div class="event-content">
            <span class="event-type">{{ event.get_event_type_display }}</span>
            <h3 class="event-title">
                <a href="{% url 'event_detail' event.pk %}">{{ event.title }}</a>
            </h3>
            <div class="event-meta">
                <p><strong>üìÖ</strong> {{ event.date|date:"d.m.Y H:i" }}</p>
                <p><strong>üìç</strong> {{ event.location }}</p>
                <p><strong>üí∞</strong> {% if event.price > 0 %}{{ event.price }} —Ä—É–±.{% else %}–ë–µ—Å–ø–ª–∞—Ç–Ω–æ{% endif %}</p>
            </div>
            <a href="{% url 'event_detail' event.pk %}" class="btn">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="no-events">
    <p>–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
</div>
{% endif %}
{% endblock %}