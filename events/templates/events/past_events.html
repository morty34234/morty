{% extends 'events/base.html' %}

{% block title %}–ü—Ä–æ—à–µ–¥—à–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è - –ê—Ñ–∏—à–∞{% endblock %}

{% block content %}
<div class="page-header">
    <h1>{{ page_title }}</h1>
</div>

<!-- –§–æ—Ä–º–∞ –ø–æ–∏—Å–∫–∞ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ -->
<div class="search-form">
    <form method="get">
        <div style="display: grid; grid-template-columns: 2fr 1fr auto; gap: 1rem; align-items: end;">
            <div class="form-group">
                <label for="{{ search_form.search.id_for_label }}">{{ search_form.search.label }}</label>
                {{ search_form.search }}
            </div>
            <div class="form-group">
                <label for="{{ search_form.event_type.id_for_label }}">{{ search_form.event_type.label }}</label>
                {{ search_form.event_type }}
            </div>
            <button type="submit" class="btn">–ù–∞–π—Ç–∏</button>
        </div>
    </form>
</div>

{% if events %}
    <div class="events-grid">
        {% for event in events %}
        <div class="event-card" style="opacity: 0.8;">
            {% if event.image %}
            <img src="{{ event.image.url }}" alt="{{ event.title }}" class="event-image">
            {% else %}
            <div style="height: 200px; background: #ddd; display: flex; align-items: center; justify-content: center;">
                <span>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç</span>
            </div>
            {% endif %}
            <div class="event-content">
                <span class="event-type">{{ event.get_event_type_display }}</span>
                <h3 class="event-title">
                    <a href="{% url 'event_detail' event.pk %}" style="color: inherit; text-decoration: none;">
                        {{ event.title }}
                    </a>
                </h3>
                <div class="event-meta">
                    <strong>üìÖ</strong> {{ event.date|date:"d.m.Y H:i" }}<br>
                    <strong>üìç</strong> {{ event.location }}<br>
                    <strong>üí∞</strong> {% if event.price > 0 %}{{ event.price }} —Ä—É–±.{% else %}–ë–µ—Å–ø–ª–∞—Ç–Ω–æ{% endif %}
                </div>
                <div style="color: #ff6b6b; font-weight: bold; margin: 0.5rem 0;">
                    ‚è≥ –ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ –ø—Ä–æ—à–ª–æ
                </div>
                <a href="{% url 'event_detail' event.pk %}" class="btn" style="margin-top: 1rem;">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
            </div>
        </div>
        {% endfor %}
    </div>
{% else %}
    <div style="text-align: center; padding: 3rem; background: white; border-radius: 8px;">
        <h3>–ü—Ä–æ—à–µ–¥—à–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
        <p>–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ <a href="{% url 'index' %}">–ø—Ä–µ–¥—Å—Ç–æ—è—â–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</a>.</p>
    </div>
{% endif %}
{% endblock %}